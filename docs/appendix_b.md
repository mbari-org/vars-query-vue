# Appendix B - Knowledgebase Associations

# Dynamic JSON Table

This table is generated by fetching JSON data from a URL.

<table id="json-table" border="1" cellspacing="0" cellpadding="5">
  <thead>
    <tr>
      <th>concept</th>
      <th>linkName</th>
      <th>toConcept</th>
      <th>linkValue</th>
      <th>lastUpdated</th>
    </tr>
  </thead>
  <tbody>
    <tr><td colspan="6">Loading...</td></tr>
  </tbody>
</table>

<script>
(async () => {
  const url = 'https://m3.shore.mbari.org/kb/v1/linktemplates?limit=5000'; 

  try {
    const response = await fetch(url);
    const json = await response.json();

    const data = json.content || [];
    const tbody = document.querySelector('#json-table tbody');
    tbody.innerHTML = ''; // clear the "Loading..." row

    for (const item of data) {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${item.concept ?? ''}</td>
        <td>${item.linkName ?? ''}</td>
        <td>${item.toConcept ?? ''}</td>
        <td>${item.linkValue ?? ''}</td>
        <td>${item.lastUpdated ?? ''}</td>
      `;
      tbody.appendChild(row);
    }
  } catch (err) {
    console.error('Failed to fetch JSON:', err);
    document.querySelector('#json-table tbody').innerHTML =
      '<tr><td colspan="6"><em>Failed to load data</em></td></tr>';
  }
})();
</script>
